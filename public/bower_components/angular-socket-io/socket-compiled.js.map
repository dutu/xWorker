{"version":3,"sources":["socket.js"],"names":[],"mappings":"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","file":"socket-compiled.js","sourcesContent":["/*\n * @license\n * angular-socket-io v0.7.0\n * (c) 2014 Brian Ford http://briantford.com\n * License: MIT\n */\n\nangular.module('btford.socket-io', []).\n  provider('socketFactory', function () {\n\n    'use strict';\n\n    // when forwarding events, prefix the event name\n    var defaultPrefix = 'socket:',\n      ioSocket;\n\n    // expose to provider\n    this.$get = ['$rootScope', '$timeout', function ($rootScope, $timeout) {\n\n      var asyncAngularify = function (socket, callback) {\n        return callback ? function () {\n          var args = arguments;\n          $timeout(function () {\n            callback.apply(socket, args);\n          }, 0);\n        } : angular.noop;\n      };\n\n      return function socketFactory (options) {\n        options = options || {};\n        var socket = options.ioSocket || io.connect();\n        var prefix = options.prefix === undefined ? defaultPrefix : options.prefix ;\n        var defaultScope = options.scope || $rootScope;\n\n        var addListener = function (eventName, callback) {\n          socket.on(eventName, callback.__ng = asyncAngularify(socket, callback));\n        };\n\n        var addOnceListener = function (eventName, callback) {\n          socket.once(eventName, callback.__ng = asyncAngularify(socket, callback));\n        };\n\n        var wrappedSocket = {\n          on: addListener,\n          addListener: addListener,\n          once: addOnceListener,\n\n          emit: function (eventName, data, callback) {\n            var lastIndex = arguments.length - 1;\n            var callback = arguments[lastIndex];\n            if(typeof callback == 'function') {\n              callback = asyncAngularify(socket, callback);\n              arguments[lastIndex] = callback;\n            }\n            return socket.emit.apply(socket, arguments);\n          },\n\n          removeListener: function (ev, fn) {\n            if (fn && fn.__ng) {\n              arguments[1] = fn.__ng;\n            }\n            return socket.removeListener.apply(socket, arguments);\n          },\n\n          removeAllListeners: function() {\n            return socket.removeAllListeners.apply(socket, arguments);\n          },\n\n          disconnect: function (close) {\n            return socket.disconnect(close);\n          },\n\n          connect: function() {\n            return socket.connect();\n          },\n\n          // when socket.on('someEvent', fn (data) { ... }),\n          // call scope.$broadcast('someEvent', data)\n          forward: function (events, scope) {\n            if (events instanceof Array === false) {\n              events = [events];\n            }\n            if (!scope) {\n              scope = defaultScope;\n            }\n            events.forEach(function (eventName) {\n              var prefixedEvent = prefix + eventName;\n              var forwardBroadcast = asyncAngularify(socket, function () {\n                Array.prototype.unshift.call(arguments, prefixedEvent);\n                scope.$broadcast.apply(scope, arguments);\n              });\n              scope.$on('$destroy', function () {\n                socket.removeListener(eventName, forwardBroadcast);\n              });\n              socket.on(eventName, forwardBroadcast);\n            });\n          }\n        };\n\n        return wrappedSocket;\n      };\n    }];\n  });\n"]}